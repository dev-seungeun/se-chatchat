{"ast":null,"code":"import { database, database_set, database_ref, database_on_value } from \"../services/firebase\";\nimport { onValue, onChildAdded, onChildChanged, onChildRemoved } from \"firebase/database\";\nexport function getRooms() {\n  let rooms = [];\n  const roomRef = database_ref(database, \"chats/\");\n  onValue(roomRef, snapshot => {\n    console.log(snapshot);\n    console.log(snapshot._node.children_);\n    snapshot.forEach(row => {\n      rooms.push(row.val());\n    });\n  });\n  return rooms;\n}\nexport function sendChat(data) {\n  return database_set(database_ref(database, 'chats/sesh/' + data.timestamp), {\n    message: data.message,\n    timestamp: data.timestamp,\n    email: data.email,\n    uid: data.uid\n  });\n}\nexport function getChats() {\n  let chats = [];\n  const chatRef = database_ref(database, \"chats/sesh\");\n  onValue(chatRef, snapshot => {\n    snapshot.forEach(row => {\n      chats.push(row.val());\n    });\n  });\n  return chats;\n}\nexport const chatOnValue = onValue;\nexport const chatOnChildAdded = onChildAdded;\nexport const chatOnChildChanged = onChildChanged;\nexport const chatOnChildRemoved = onChildRemoved;","map":{"version":3,"sources":["C:/workspaces/atom_workspace/SESH-chatchat/src/helpers/database.js"],"names":["database","database_set","database_ref","database_on_value","onValue","onChildAdded","onChildChanged","onChildRemoved","getRooms","rooms","roomRef","snapshot","console","log","_node","children_","forEach","row","push","val","sendChat","data","timestamp","message","email","uid","getChats","chats","chatRef","chatOnValue","chatOnChildAdded","chatOnChildChanged","chatOnChildRemoved"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,YAAnB,EAAiCC,YAAjC,EAA+CC,iBAA/C,QAAwE,sBAAxE;AACA,SAASC,OAAT,EAAkBC,YAAlB,EAAgCC,cAAhC,EAAgDC,cAAhD,QAAsE,mBAAtE;AAEA,OAAO,SAASC,QAAT,GAAoB;AACzB,MAAIC,KAAK,GAAG,EAAZ;AACA,QAAMC,OAAO,GAAGR,YAAY,CAACF,QAAD,EAAW,QAAX,CAA5B;AACAI,EAAAA,OAAO,CAACM,OAAD,EAAWC,QAAD,IAAc;AAC7BC,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,KAAT,CAAeC,SAA3B;AACAJ,IAAAA,QAAQ,CAACK,OAAT,CAAkBC,GAAD,IAAS;AACxBR,MAAAA,KAAK,CAACS,IAAN,CAAWD,GAAG,CAACE,GAAJ,EAAX;AACD,KAFD;AAGD,GANM,CAAP;AAOA,SAAOV,KAAP;AACD;AAED,OAAO,SAASW,QAAT,CAAkBC,IAAlB,EAAwB;AAC7B,SAAOpB,YAAY,CAACC,YAAY,CAACF,QAAD,EAAW,gBAAcqB,IAAI,CAACC,SAA9B,CAAb,EAAuD;AACxEC,IAAAA,OAAO,EAAEF,IAAI,CAACE,OAD0D;AAExED,IAAAA,SAAS,EAAED,IAAI,CAACC,SAFwD;AAGxEE,IAAAA,KAAK,EAAEH,IAAI,CAACG,KAH4D;AAIxEC,IAAAA,GAAG,EAAEJ,IAAI,CAACI;AAJ8D,GAAvD,CAAnB;AAMD;AAED,OAAO,SAASC,QAAT,GAAoB;AACzB,MAAIC,KAAK,GAAG,EAAZ;AACA,QAAMC,OAAO,GAAG1B,YAAY,CAACF,QAAD,EAAW,YAAX,CAA5B;AACAI,EAAAA,OAAO,CAACwB,OAAD,EAAWjB,QAAD,IAAc;AAC7BA,IAAAA,QAAQ,CAACK,OAAT,CAAkBC,GAAD,IAAS;AACxBU,MAAAA,KAAK,CAACT,IAAN,CAAWD,GAAG,CAACE,GAAJ,EAAX;AACD,KAFD;AAGD,GAJM,CAAP;AAKA,SAAOQ,KAAP;AACD;AAED,OAAO,MAAME,WAAW,GAAGzB,OAApB;AACP,OAAO,MAAM0B,gBAAgB,GAAGzB,YAAzB;AACP,OAAO,MAAM0B,kBAAkB,GAAGzB,cAA3B;AACP,OAAO,MAAM0B,kBAAkB,GAAGzB,cAA3B","sourcesContent":["import { database, database_set, database_ref, database_on_value } from \"../services/firebase\";\r\nimport { onValue, onChildAdded, onChildChanged, onChildRemoved } from \"firebase/database\";\r\n\r\nexport function getRooms() {\r\n  let rooms = [];\r\n  const roomRef = database_ref(database, \"chats/\");\r\n  onValue(roomRef, (snapshot) => {\r\n    console.log(snapshot);\r\n    console.log(snapshot._node.children_);\r\n    snapshot.forEach((row) => {\r\n      rooms.push(row.val());\r\n    });\r\n  });\r\n  return rooms;\r\n}\r\n\r\nexport function sendChat(data) {\r\n  return database_set(database_ref(database, 'chats/sesh/'+data.timestamp), {\r\n    message: data.message,\r\n    timestamp: data.timestamp,\r\n    email: data.email,\r\n    uid: data.uid\r\n  });\r\n}\r\n\r\nexport function getChats() {\r\n  let chats = [];\r\n  const chatRef = database_ref(database, \"chats/sesh\");\r\n  onValue(chatRef, (snapshot) => {\r\n    snapshot.forEach((row) => {\r\n      chats.push(row.val());\r\n    });\r\n  });\r\n  return chats;\r\n}\r\n\r\nexport const chatOnValue = onValue;\r\nexport const chatOnChildAdded = onChildAdded;\r\nexport const chatOnChildChanged = onChildChanged;\r\nexport const chatOnChildRemoved = onChildRemoved;\r\n"]},"metadata":{},"sourceType":"module"}